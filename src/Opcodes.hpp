#pragma once

#include "Register.hpp"

#define MAKE_OPCODE(opc) void OP##_##opc(VMState* state, Opcode& op)
#define BUILD_OPCODE(opc) opcodes[opc] = Opcode(OP##_##opc, opc)

struct Opcode
{
    typedef void (*Handler)(VMState*, Opcode&);

    Opcode();
    Opcode(Handler func, uint8_t opcode);

    static void FillTable(Opcode* opcodes);

    Handler func;			// Function pointer to the opcode handler
    uint8_t opcode = 0;     // Opcode associated with this instruction
};

MAKE_OPCODE(0x00);
MAKE_OPCODE(0x01);
MAKE_OPCODE(0x02);
MAKE_OPCODE(0x03);
MAKE_OPCODE(0x04);
MAKE_OPCODE(0x05);
MAKE_OPCODE(0x06);
MAKE_OPCODE(0x07);
MAKE_OPCODE(0x08);
MAKE_OPCODE(0x09);
MAKE_OPCODE(0x0A);
MAKE_OPCODE(0x0B);
MAKE_OPCODE(0x0C);
MAKE_OPCODE(0x0D);
MAKE_OPCODE(0x0E);
MAKE_OPCODE(0x0F);

MAKE_OPCODE(0x10);
MAKE_OPCODE(0x11);
MAKE_OPCODE(0x12);
MAKE_OPCODE(0x13);
MAKE_OPCODE(0x14);
MAKE_OPCODE(0x15);
MAKE_OPCODE(0x16);
MAKE_OPCODE(0x17);
MAKE_OPCODE(0x18);
MAKE_OPCODE(0x19);
MAKE_OPCODE(0x1A);
MAKE_OPCODE(0x1B);
MAKE_OPCODE(0x1C);
MAKE_OPCODE(0x1D);
MAKE_OPCODE(0x1E);
MAKE_OPCODE(0x1F);

MAKE_OPCODE(0x20);
MAKE_OPCODE(0x21);
MAKE_OPCODE(0x22);
MAKE_OPCODE(0x23);
MAKE_OPCODE(0x24);
MAKE_OPCODE(0x25);
MAKE_OPCODE(0x26);
MAKE_OPCODE(0x27);
MAKE_OPCODE(0x28);
MAKE_OPCODE(0x29);
MAKE_OPCODE(0x2A);
MAKE_OPCODE(0x2B);
MAKE_OPCODE(0x2C);
MAKE_OPCODE(0x2D);
MAKE_OPCODE(0x2E);
MAKE_OPCODE(0x2F);

MAKE_OPCODE(0x30);
MAKE_OPCODE(0x31);
MAKE_OPCODE(0x32);
MAKE_OPCODE(0x33);
MAKE_OPCODE(0x34);
MAKE_OPCODE(0x35);
MAKE_OPCODE(0x36);
MAKE_OPCODE(0x37);
MAKE_OPCODE(0x38);
MAKE_OPCODE(0x39);
MAKE_OPCODE(0x3A);
MAKE_OPCODE(0x3B);
MAKE_OPCODE(0x3C);
MAKE_OPCODE(0x3D);
MAKE_OPCODE(0x3E);
MAKE_OPCODE(0x3F);

MAKE_OPCODE(0x40);
MAKE_OPCODE(0x41);
MAKE_OPCODE(0x42);
MAKE_OPCODE(0x43);
MAKE_OPCODE(0x44);
MAKE_OPCODE(0x45);
MAKE_OPCODE(0x46);
MAKE_OPCODE(0x47);
MAKE_OPCODE(0x48);
MAKE_OPCODE(0x49);
MAKE_OPCODE(0x4A);
MAKE_OPCODE(0x4B);
MAKE_OPCODE(0x4C);
MAKE_OPCODE(0x4D);
MAKE_OPCODE(0x4E);
MAKE_OPCODE(0x4F);

MAKE_OPCODE(0x50);
MAKE_OPCODE(0x51);
MAKE_OPCODE(0x52);
MAKE_OPCODE(0x53);
MAKE_OPCODE(0x54);
MAKE_OPCODE(0x55);
MAKE_OPCODE(0x56);
MAKE_OPCODE(0x57);
MAKE_OPCODE(0x58);
MAKE_OPCODE(0x59);
MAKE_OPCODE(0x5A);
MAKE_OPCODE(0x5B);
MAKE_OPCODE(0x5C);
MAKE_OPCODE(0x5D);
MAKE_OPCODE(0x5E);
MAKE_OPCODE(0x5F);

MAKE_OPCODE(0x60);
MAKE_OPCODE(0x61);
MAKE_OPCODE(0x62);
MAKE_OPCODE(0x63);
MAKE_OPCODE(0x64);
MAKE_OPCODE(0x65);
MAKE_OPCODE(0x66);
MAKE_OPCODE(0x67);
MAKE_OPCODE(0x68);
MAKE_OPCODE(0x69);
MAKE_OPCODE(0x6A);
MAKE_OPCODE(0x6B);
MAKE_OPCODE(0x6C);
MAKE_OPCODE(0x6D);
MAKE_OPCODE(0x6E);
MAKE_OPCODE(0x6F);

MAKE_OPCODE(0x70);
MAKE_OPCODE(0x71);
MAKE_OPCODE(0x72);
MAKE_OPCODE(0x73);
MAKE_OPCODE(0x74);
MAKE_OPCODE(0x75);
MAKE_OPCODE(0x76);
MAKE_OPCODE(0x77);
MAKE_OPCODE(0x78);
MAKE_OPCODE(0x79);
MAKE_OPCODE(0x7A);
MAKE_OPCODE(0x7B);
MAKE_OPCODE(0x7C);
MAKE_OPCODE(0x7D);
MAKE_OPCODE(0x7E);
MAKE_OPCODE(0x7F);

MAKE_OPCODE(0x80);
MAKE_OPCODE(0x81);
MAKE_OPCODE(0x82);
MAKE_OPCODE(0x83);
MAKE_OPCODE(0x84);
MAKE_OPCODE(0x85);
MAKE_OPCODE(0x86);
MAKE_OPCODE(0x87);
MAKE_OPCODE(0x88);
MAKE_OPCODE(0x89);
MAKE_OPCODE(0x8A);
MAKE_OPCODE(0x8B);
MAKE_OPCODE(0x8C);
MAKE_OPCODE(0x8D);
MAKE_OPCODE(0x8E);
MAKE_OPCODE(0x8F);

MAKE_OPCODE(0x90);
MAKE_OPCODE(0x91);
MAKE_OPCODE(0x92);
MAKE_OPCODE(0x93);
MAKE_OPCODE(0x94);
MAKE_OPCODE(0x95);
MAKE_OPCODE(0x96);
MAKE_OPCODE(0x97);
MAKE_OPCODE(0x98);
MAKE_OPCODE(0x99);
MAKE_OPCODE(0x9A);
MAKE_OPCODE(0x9B);
MAKE_OPCODE(0x9C);
MAKE_OPCODE(0x9D);
MAKE_OPCODE(0x9E);
MAKE_OPCODE(0x9F);

MAKE_OPCODE(0xA0);
MAKE_OPCODE(0xA1);
MAKE_OPCODE(0xA2);
MAKE_OPCODE(0xA3);
MAKE_OPCODE(0xA4);
MAKE_OPCODE(0xA5);
MAKE_OPCODE(0xA6);
MAKE_OPCODE(0xA7);
MAKE_OPCODE(0xA8);
MAKE_OPCODE(0xA9);
MAKE_OPCODE(0xAA);
MAKE_OPCODE(0xAB);
MAKE_OPCODE(0xAC);
MAKE_OPCODE(0xAD);
MAKE_OPCODE(0xAE);
MAKE_OPCODE(0xAF);

MAKE_OPCODE(0xB0);
MAKE_OPCODE(0xB1);
MAKE_OPCODE(0xB2);
MAKE_OPCODE(0xB3);
MAKE_OPCODE(0xB4);
MAKE_OPCODE(0xB5);
MAKE_OPCODE(0xB6);
MAKE_OPCODE(0xB7);
MAKE_OPCODE(0xB8);
MAKE_OPCODE(0xB9);
MAKE_OPCODE(0xBA);
MAKE_OPCODE(0xBB);
MAKE_OPCODE(0xBC);
MAKE_OPCODE(0xBD);
MAKE_OPCODE(0xBE);
MAKE_OPCODE(0xBF);

MAKE_OPCODE(0xC0);
MAKE_OPCODE(0xC1);
MAKE_OPCODE(0xC2);
MAKE_OPCODE(0xC3);
MAKE_OPCODE(0xC4);
MAKE_OPCODE(0xC5);
MAKE_OPCODE(0xC6);
MAKE_OPCODE(0xC7);
MAKE_OPCODE(0xC8);
MAKE_OPCODE(0xC9);
MAKE_OPCODE(0xCA);
MAKE_OPCODE(0xCB);
MAKE_OPCODE(0xCC);
MAKE_OPCODE(0xCD);
MAKE_OPCODE(0xCE);
MAKE_OPCODE(0xCF);

MAKE_OPCODE(0xD0);
MAKE_OPCODE(0xD1);
MAKE_OPCODE(0xD2);
MAKE_OPCODE(0xD3);
MAKE_OPCODE(0xD4);
MAKE_OPCODE(0xD5);
MAKE_OPCODE(0xD6);
MAKE_OPCODE(0xD7);
MAKE_OPCODE(0xD8);
MAKE_OPCODE(0xD9);
MAKE_OPCODE(0xDA);
MAKE_OPCODE(0xDB);
MAKE_OPCODE(0xDC);
MAKE_OPCODE(0xDD);
MAKE_OPCODE(0xDE);
MAKE_OPCODE(0xDF);

MAKE_OPCODE(0xE0);
MAKE_OPCODE(0xE1);
MAKE_OPCODE(0xE2);
MAKE_OPCODE(0xE3);
MAKE_OPCODE(0xE4);
MAKE_OPCODE(0xE5);
MAKE_OPCODE(0xE6);
MAKE_OPCODE(0xE7);
MAKE_OPCODE(0xE8);
MAKE_OPCODE(0xE9);
MAKE_OPCODE(0xEA);
MAKE_OPCODE(0xEB);
MAKE_OPCODE(0xEC);
MAKE_OPCODE(0xED);
MAKE_OPCODE(0xEE);
MAKE_OPCODE(0xEF);

MAKE_OPCODE(0xF0);
MAKE_OPCODE(0xF1);
MAKE_OPCODE(0xF2);
MAKE_OPCODE(0xF3);
MAKE_OPCODE(0xF4);
MAKE_OPCODE(0xF5);
MAKE_OPCODE(0xF6);
MAKE_OPCODE(0xF7);
MAKE_OPCODE(0xF8);
MAKE_OPCODE(0xF9);
MAKE_OPCODE(0xFA);
MAKE_OPCODE(0xFB);
MAKE_OPCODE(0xFC);
MAKE_OPCODE(0xFD);
MAKE_OPCODE(0xFE);
MAKE_OPCODE(0xFF);